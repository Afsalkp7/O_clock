<!doctype html>
<html lang="en">

<head>
    <title>O|o' CLOCK</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/style2.css">
    <!-- Latest compiled and minified CSS -->
    {{!--
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"> --}}

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    {{!-- chartjs --}}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>


    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>


</head>

<body>
    <section>
        <div class="wrapper d-flex align-items-stretch">
            <nav id="sidebar">
                <div class="custom-menu">
                    <button type="button" id="sidebarCollapse" class="btn btn-dark">
                        <i class="fa fa-bars"></i>
                        <span class="sr-only">Toggle Menu</span>
                    </button>
                </div>
                <div class="p-4">
                    <h1><a href="" class="logo">O|o' CLOCK</a></h1>
                    <span>
                        <h5 class="text-white" id="admin_name">{{admin.name}}</h5>
                    </span>
                    <ul class="list-unstyled components mb-5" id="list_side">
                        <li class="active">
                            <a href="/adminhome"><span class="fa fa-home mr-3"></span>DASHBOARD</a>
                        </li>
                        <li class="active">
                            <a href="" data-bs-toggle="modal" data-bs-target="#exampleModalToggle"><span
                                    class="fa fa-user mr-4"></span>PROFILE</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/users"><span class="fa-solid fa-users mr-4"></span>USER</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/order"><span class="fa-solid fa-cart-shopping mr-4"></span>ORDER</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/category"><span class="fa fa-sticky-note mr-4"></span>CATEGORY</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/brands"><span class="fa fa-cogs mr-4"></span>BRAND</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/products"><span class="fa fa-suitcase mr-4"></span>PRODUCTS</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/banner"><span class="fa fa-paper-plane mr-4"></span>BANNER</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/report"><i class="fa-solid fa-chart-simple mr-4"
                                    style="color: #ffffff;"></i></span>REPORT</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/contact"><span class="fa-solid fa-message mr-4"></span>MESSAGES</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/coupon"><i class="fa-solid fa-ticket mr-4" style="color: #fcfcfc;"></i></span>COUPON</a>
                        </li>

                    </ul>

                    <div class="mb-5">
                        <a href="/adminhome/admin_logout" id="logout"><span
                                class="fa-solid fa-right-from-bracket mr-3"></span>Logout</a>

                    </div>

                </div>
            </nav>


            <!-- Page Content  -->
            <div id="content" class="p-4 p-md-5 pt-5">
                <section class="mt-3">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div class="card-body">
                                        <div class="mr-5 text-primary text-center"
                                            style="font-weight: 600; font-size:large">
                                            <h2 class="text-center text-dark">{{orderCount.totalOrders}}</h2>TOTAL
                                            ORDERS
                                        </div>
                                    </div>
                                    <a class="card-footer text-dark clearfix small z-1" href="/adminhome/order">
                                        <span class="float-left">View Details</span>
                                        <span class="float-right">
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <div class="mr-5 text-success text-center"
                                            style="font-weight: 600; font-size:large">
                                            <h2 class="text-center text-dark">{{orderCount.deliverdOrders}}</h2>DELIVERD
                                            ORDERS
                                        </div>
                                    </div>
                                    <a class="card-footer text-dark clearfix small z-1" href="/adminhome/order">
                                        <span class="float-left">View Details</span>
                                        <span class="float-right">
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <div class="mr-5 text-warning text-center"
                                            style="font-weight: 600; font-size:large">
                                            <h2 class="text-center text-dark">{{orderCount.pendingOrders}}</h2>PENDING
                                            ORDERS
                                        </div>
                                    </div>
                                    <a class="card-footer text-dark clearfix small z-1" href="/adminhome/order">
                                        <span class="float-left">View Details</span>
                                        <span class="float-right">
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <div class="mr-5 text-danger text-center"
                                            style="font-weight: 600; font-size:17px">
                                            <h2 class="text-center text-dark">{{orderCount.cancelled}}</h2>CANCELLED
                                            ORDERS
                                        </div>
                                    </div>
                                    <a class="card-footer text-dark clearfix small z-1" href="/adminhome/order">
                                        <span class="float-left">View Details</span>
                                        <span class="float-right">
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </a>
                                </div>
                            </div>

                        </div>

                    </div>

                </section>

                {{!-- graph of a days --}}
                <section>
                    <div class="container">
                        <div class="row">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div class="card-body">
                                        <h3>Daily Report</h3>
                                        <div class="mr-5">
                                            <canvas id="myChart" style="width:100%;"></canvas>

                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>
                </section>



                {{!-- graph of a weeks --}}
                <section class="mt-5">
                    <div class="container">
                        <div class="row">
                            <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-6 p-2">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div class="card-body">
                                        <h3>Weekly Report</h3>
                                        <div class="mr-5">
                                            <canvas id="weeklyorder" style="width:100%;"></canvas>

                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-6 p-2">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div class="card-body">
                                        <h3>Monthly Report</h3>
                                        <div class="mr-5">
                                            <canvas id="yearchart" style="width:100%;"></canvas>


                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </section>


                <section class="mt-4">
                    <div class="container">
                        <div class="row">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div class="card-body">
                                        <h3>LAST ORDERS</h3>
                                        <div class="mr-5 table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Id</th>
                                                        <th scope="col">Payment Method</th>
                                                        <th scope="col">GrandTotal</th>
                                                        <th scope="col">OrderStatus</th>
                                                        {{!-- <th scope="col">Order Date</th> --}}

                                                        <th scope="col">Action</th>

                                                    </tr>
                                                </thead>
                                                <tbody class="table-group-divider">
                                                    {{#each lastThreeOrders}}
                                                    <tr>
                                                        <th scope="row">{{this._id}}</th>
                                                        <td>{{this.paymentMethod}}</td>
                                                        <td>{{this.grandtotal}}</td>
                                                        <td>{{this.orderStatus}}</td>
                                                        <td><a href="/adminhome/order/{{this._id}}" class="view-order p-1 btn  btn-light m-1" data-order-id="{{this._id}}" ><i class="fa-regular fa-eye"
                                                    style="color:black;"></i></a></td>
                                                        {{!-- <td>
                                                            <p><span style="font-size: 16px;"
                                                                    class="orderDatePlace{{@index}}"></span>
                                                            </p>
                                                        </td> --}}

                                                    </tr>
                                                    {{/each}}

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>

                </section>

              </script>

                <script>
                    const xValues = [{{ MonthOrders }}];
                    const yValues = [{{ grandTotalSum }}];


                    new Chart("myChart", {
                        type: "line",
                        data: {
                            labels: xValues,
                            datasets: [{
                                fill: false,
                                lineTension: 0,
                                backgroundColor: "lightblue",
                                borderColor: "blue",
                                data: yValues
                            }]
                        },
                        options: {
                            legend: { display: false },
                            scales: {
                                yAxes: [{ ticks: { min: 0, max: 500000 } }],
                                xAxes: [{ ticks: { min: 0, max: 31 } }],
                            }
                        }
                    });
                </script>


                {{!-- weekly --}}
                <script>
                    var XValues = ["Day1", "Day2", "Day3", "Day4", "Day5", "Day6", "Day7",];
                    var YValues = [{{ weekOrders }}];
                    var barColors = ["black", "grey", "lightgrey", "black", "grey", "lightgrey", "black"];

                    new Chart("weeklyorder", {
                        type: "bar",
                        data: {
                            labels: XValues,
                            datasets: [{
                                backgroundColor: barColors,
                                data: YValues
                            }]
                        },
                        options: {
                            legend: { display: false },
                            title: {
                                display: true,
                            }
                        }
                    });
                </script>



                {{!-- year chart --}}
                <script>
                    var x = ["Jan", "Feb", "Mar", "Apr", "May", "june", "july", "Aug", "Sep", "Oct", "Nov", "Dec"];
                    var y = [{{ yearOrders }}];
                    var barColors = [
                        "#0a0404",
                        "#3b3838",
                        "#4f4e4e",
                        "#575454",
                        "##6b6a6a",
                        "#706b6b",
                        "#858383",
                        "##999090",
                        "#a8a5a5",
                        "#c2bebe",
                        "#c7bbbb",
                        "lightgrey",

                    ];

                    new Chart("yearchart", {
                        type: "doughnut",
                        data: {
                            labels: x,
                            datasets: [{
                                backgroundColor: barColors,
                                data: y
                            }]
                        },
                        options: {
                            title: {
                                display: true,
                                text: "Year Report" + " " + (new Date().getFullYear())
                            }
                        }
                    });
                </script>




            </div>

    </section>

    <div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
        tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalToggleLabel">Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="container" id="admin_profile">
                        <div class="col-md-12 text-center">
                            <img src="/images/profile.png" alt="">
                            <h2 style="color: red; font-weight:bolder">Welcome </h1>
                                <h4>{{admin.name}}</h4>
                                <h5>{{admin.email}}</h5>
                                <h5>{{admin.phone}}</h5>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-dark" data-bs-target="#exampleModalToggle2"
                            data-bs-toggle="modal" data-bs-dismiss="modal">Edit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2"
        tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="exampleModalToggleLabel2"
                        style="text-align: center; font-family: cursive; font-weight: bold;">Edit Form</h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="myForm">
                        {{!-- <h3 style="text-align: center; font-family: cursive; font-weight: bold;">Edit Form</h3>
                        --}}
                        <div class="mb-4">
                            <input type="text" class="form-control" id="InputName" placeholder="Enter Name" name="name"
                                value="{{admin.name}}">
                        </div>
                        <div class="mb-4">
                            <input type="email" class="form-control" id="InputEmail" placeholder="Enter Email"
                                name="email" value="{{admin.email}}">
                        </div>
                        <div class="mb-4">
                            <input type="number" class="form-control" id="Inputphone" placeholder="Enter Phone number"
                                name="phone" value="{{admin.phone}}">
                        </div>
                        <button type="button" id="submitButton" onclick="fun()" class="btn btn-primary"
                            data-bs-toggle="modal" data-bs-dismiss="modal">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {{#if errors}}
    <script>
        alert('{{errors.msg}}')
    </script>
    {{/if}}






    <script src="/js/edit.js"></script>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/popper.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/main.js"></script>
</body>

</html>