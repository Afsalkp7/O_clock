<!doctype html>
<html lang="en">

<head>
    <title>O|o' CLOCK</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/style2.css">
    <!-- Latest compiled and minified CSS -->
    {{!--
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"> --}}

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    {{!--
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> --}}


</head>

<body>
    <section>
        <div class="wrapper d-flex align-items-stretch">
            <nav id="sidebar">
                <div class="custom-menu">
                    <button type="button" id="sidebarCollapse" class="btn btn-dark">
                        <i class="fa fa-bars"></i>
                        <span class="sr-only">Toggle Menu</span>
                    </button>
                </div>
                <div class="p-4">
                    <h1><a href="" class="logo">O|o' CLOCK</a></h1>
                    <span>
                        <h5 class="text-white" id="admin_name">{{admin.name}}</h5>
                    </span>
                    <ul class="list-unstyled components mb-5" id="list_side">
                        <li class="active">
                            <a href="/adminhome"><span class="fa fa-home mr-3"></span>DASHBOARD</a>
                        </li>
                        <li class="active">
                            <a href="" data-bs-toggle="modal" data-bs-target="#exampleModalToggle"><span
                                    class="fa fa-user mr-4"></span>PROFILE</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/users"><span class="fa-solid fa-users mr-4"></span>USER</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/order"><span class="fa-solid fa-cart-shopping mr-4"></span>ORDER</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/category"><span class="fa fa-sticky-note mr-4"></span>CATEGORY</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/brands"><span class="fa fa-cogs mr-4"></span>BRAND</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/products"><span class="fa fa-suitcase mr-4"></span>PRODUCTS</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/banner"><span class="fa fa-paper-plane mr-4"></span>BANNER</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/report"><i class="fa-solid fa-chart-simple mr-4"
                                    style="color: #ffffff;"></i></span>REPORT</a>
                        </li>
                        <li class="active">
                            <a href="/adminhome/contact"><span class="fa-solid fa-message mr-4"></span>MESSAGES</a>
                        </li>

                    </ul>

                    <div class="mb-5">
                        <a href="/adminhome/admin_logout" id="logout"><span
                                class="fa-solid fa-right-from-bracket mr-3"></span>Logout</a>

                    </div>

                </div>
            </nav>


            <!-- Page Content  -->
            <div id="content" class="p-4 p-md-5 pt-5" style="background-color: rgb(248, 251, 253);">
                <section class="mt-3">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div class="card-body">
                                        <div class="mr-5  text-center"
                                            style="font-weight: 600; font-size:large;color:#2b2b4d;">
                                            <h3 class="text-center text-dark">{{revenue}}/-</h3>TOTAL
                                            REVENUE
                                        </div>
                                    </div>
                                    <a class="card-footer text-dark clearfix small z-1" href="/adminhome/order">
                                        <span class="float-left">View Details</span>
                                        <span class="float-right">
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <div class="mr-5  text-center"
                                            style="font-weight: 600; font-size:large;color:#2b2b4d">
                                            <h2 class="text-center text-dark">{{totalOrders}}</h2>TOTAL
                                            ORDERS
                                        </div>
                                    </div>
                                    <a class="card-footer text-dark clearfix small z-1" href="/adminhome/order">
                                        <span class="float-left">View Details</span>
                                        <span class="float-right">
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <div class="mr-5  text-center"
                                            style="font-weight: 600; font-size:large;color:#2b2b4d">
                                            <h2 class="text-center text-dark">{{totalUsers}}</h2>TOTAL
                                            USERS
                                        </div>
                                    </div>
                                    <a class="card-footer text-dark clearfix small z-1" href="/adminhome/user">
                                        <span class="float-left">View Details</span>
                                        <span class="float-right">
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <div class="mr-5  text-center" 
                                            style="font-weight: 600; font-size:17px; color:#2b2b4d">
                                            <h2 class="text-center text-dark">{{totalProducts}}</h2>TOTAL
                                            PRODUCTS
                                        </div>
                                    </div>
                                    <a class="card-footer text-dark clearfix small z-1" href="/adminhome/order">
                                        <span class="float-left">View Details</span>
                                        <span class="float-right">
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </a>
                                </div>
                            </div>

                        </div>

                    </div>

                </section>


                {{!-- recent order --}}
                <section class="mt-5">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 col-xxl-8 p-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div class="card-body">
                                        <h4>Recent Orders</h4>
                                        <div class="mr-5 table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Id</th>
                                                        <th scope="col">Payment</th>
                                                        <th scope="col">Total</th>
                                                        <th scope="col">Status</th>
                                                        <th scope="col">Action</th>

                                                    </tr>
                                                </thead>
                                                <tbody class="table-group-divider">
                                                    {{#each lastThreeOrders}}
                                                    <tr>
                                                        <th scope="row">{{this._id}}</th>
                                                        <td>{{this.paymentMethod}}</td>
                                                        <td>{{this.grandtotal}}</td>
                                                        <td>{{this.orderStatus}}</td>
                                                        <td><a href="/adminhome/order/{{this._id}}"
                                                                class="view-order p-1 btn  btn-light m-1"
                                                                data-order-id="{{this._id}}"><i
                                                                    class="fa-regular fa-eye"
                                                                    style="color:black;"></i></a></td>
                                                    </tr>
                                                    {{/each}}

                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td> <a href="/adminhome/order"
                                                                class="btn btn-outline-dark">View Orders</a>
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 col-xxl-4 p-1">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div>
                                        <h5 class="text-center">Sales Report</h5>
                                        <div class="mr-5">
                                            <canvas id="weeklyorder" style="width:100%;"></canvas>

                                        </div>
                                        <div class="m-4">
                                            <h6 class="text-dark">Total Orders: <span
                                                    class="text-primary p-5">{{orderCount.totalorders}}</span></h6>
                                            <h6 class="text-dark">Deliverd Orders: <span
                                                    class="text-primary p-4">{{orderCount.deliverdOrders}}</span></h6>
                                            <h6 class="text-dark">Pending Orders: <span
                                                    class="text-primary p-4">{{orderCount.pendingOrders}}</span></h6>
                                            <h6 class="text-dark">Cancelled Orders: <span
                                                    class="text-primary p-3">{{orderCount.cancelled}}</span></h6>
                                        </div>
                                        <div class="m-4">
                                            <h6 style="color: brown;" >Today Income: <span class="text-success p-4" style="font-size: 20px;">{{todayIncome}}/-</span></h6>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mt-5">
                    <div class="container">
                        <div class="row">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6">

                                <div id="yearorder" style="width:100%;" class="shadow-lg"></div>

                            </div>

                            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6 shadow-lg">
                               <div class="card text-center">
                                <canvas id="fiveyears" style="width:100%;max-width:350px" class="text-center"></canvas>

                               </div>

                            </div>
                        </div>
                    </div>

                </section>

                <section class="mt-5">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div class="card-body">
                                        <a href="/adminhome/category"><div class="mr-5  text-center"
                                            style="font-weight: 600; font-size:large">
                                            <h2 class="text-center text-dark">{{totalCategory}}</h2>Total
                                            Categories
                                        </div></a>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <a href="/adminhome/brands"><div class="mr-5  text-center"
                                            style="font-weight: 600; font-size:large">
                                            <h2 class="text-center text-dark">{{totalBrand}}</h2>Total
                                            Brands
                                        </div></a>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <a href="/adminhome/banner"><div class="mr-5  text-center"
                                            style="font-weight: 600; font-size:large">
                                            <h2 class="text-center text-dark">{{totalBanner}}</h2>Total
                                            Banners
                                        </div></a>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 mb-3">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <a href=""><div class="mr-5  text-center"
                                            style="font-weight: 600; font-size:17px">
                                            <h2 class="text-center text-dark">{{totalProducts}}</h2>Total
                                            Products
                                        </div></a>
                                    </div>
                                    
                                </div>
                            </div>

                        </div>

                    </div>

                </section>

                {{!-- daily details --}}
                <section class="mt-5">
                    <div class="container">
                        <div class="row">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div class="card-body">
                                        <h3>Daily Report</h3>
                                        <div class="mr-5">
                                            <canvas id="myChart" style="width:100%;"></canvas>

                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </section>

                {{!-- cash details --}}
                <section class="mt-5">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-xl-4 col-sm-6 mb-4">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100 ">
                                    <div class="card-body">
                                        <div class="mr-5  text-center"
                                            style="font-weight: 600; font-size:large">
                                            <h4 class="text-center text-success">{{revenue}}/-</h4>Total
                                            Revenue
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="col-xl-4 col-sm-6 mb-4">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <div class="mr-5  text-center"
                                            style="font-weight: 600; font-size:large">
                                            <h4 class="text-center text-success">{{cashOnDeliveryAmount}}/-</h4>
                                            Cash On Delivery
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="col-xl-4 col-sm-6 mb-4">
                                <div class="card text-dark bg-white shadow-lg o-hidden h-100">
                                    <div class="card-body">

                                        <div class="mr-5  text-center"
                                            style="font-weight: 600; font-size:large">
                                            <h4 class="text-center text-success">{{onlinePayment}}/-</h4>
                                            Online Payments
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                        </div>

                    </div>

                </section>


            </div>

            {{!-- daily report --}}
            <script>
                    const xVal = [{{ MonthOrders }}];
                    const yVal = [{{ grandTotalSum }}];


                    new Chart("myChart", {
                        type: "line",
                        data: {
                            labels: xVal,
                            datasets: [{
                                fill: false,
                                lineTension: 0,
                                backgroundColor: "#32768c",
                                borderColor: "#2b5866",
                                data: yVal
                            }]
                        },
                        options: {
                            legend: { display: false },
                            scales: {
                                yAxes: [{ ticks: { min: 0, max: 150000 } }],
                                xAxes: [{ ticks: { min: 0, max: 31 } }],
                            }
                        }
                    });
                </script>


            {{!-- weekly --}}
            <script>
                var XValues = ["Day1", "Day2", "Day3", "Day4", "Day5", "Day6", "Day7",];
                var YValues = [{{ weekOrders }}];
                var barColors = ["black", "grey", "lightgrey", "black", "grey", "lightgrey", "black"];

                new Chart("weeklyorder", {
                    type: "bar",
                    data: {
                        labels: XValues,
                        datasets: [{
                            backgroundColor: barColors,
                            data: YValues
                        }]
                    },
                    options: {
                        legend: { display: false },
                        title: {
                            display: true,
                        }
                    }
                });
            </script>


            {{!-- monthly --}}
            <script>
                const xArray = ["Jan", "Feb", "Mar", "Apr", "May", "june", "july", "Aug", "Sep", "Oct", "Nov", "Dec"];
                const yArray = [{{ yearOrders }}];

                const data = [{
                    x: xArray,
                    y: yArray,
                    mode: "lines"
                }];
                const layout = {

                    title: "Monthly Report"
                };

                Plotly.newPlot("yearorder", data, layout);
            </script>

            {{!-- fiveyears --}}
            <script>
                var yValues = [{{fiveYearAmounts}}];
                var xValues = [{{fiveYears}}];
                var barColors = [
                    "#d3e9f2",
                    "#aed5e6",
                    "#8dc3d9",
                    "#aee1f5",
                    "#bae6f7"
                ];

                new Chart("fiveyears", {
                    type: "pie",
                    data: {
                        labels: xValues,
                        datasets: [{
                            backgroundColor: barColors,
                            data: yValues
                        }]
                    },
                    options: {
                        title: {
                            display: true,
                            text: "last 3 years order"
                            
                        }
                    }
                });
            </script>



    </section>

    <div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
        tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalToggleLabel">Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="container" id="admin_profile">
                        <div class="col-md-12 text-center">
                            <img src="/images/profile.png" alt="">
                            <h2 style="color: red; font-weight:bolder">Welcome </h1>
                                <h4>{{admin.name}}</h4>
                                <h5>{{admin.email}}</h5>
                                <h5>{{admin.phone}}</h5>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-dark" data-bs-target="#exampleModalToggle2"
                            data-bs-toggle="modal" data-bs-dismiss="modal">Edit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2"
        tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="exampleModalToggleLabel2"
                        style="text-align: center; font-family: cursive; font-weight: bold;">Edit Form</h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="myForm">
                        {{!-- <h3 style="text-align: center; font-family: cursive; font-weight: bold;">Edit Form</h3>
                        --}}
                        <div class="mb-4">
                            <input type="text" class="form-control" id="InputName" placeholder="Enter Name" name="name"
                                value="{{admin.name}}">
                        </div>
                        <div class="mb-4">
                            <input type="email" class="form-control" id="InputEmail" placeholder="Enter Email"
                                name="email" value="{{admin.email}}">
                        </div>
                        <div class="mb-4">
                            <input type="number" class="form-control" id="Inputphone" placeholder="Enter Phone number"
                                name="phone" value="{{admin.phone}}">
                        </div>
                        <button type="button" id="submitButton" onclick="fun()" class="btn btn-primary"
                            data-bs-toggle="modal" data-bs-dismiss="modal">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>



    {{#if errors}}
    <script>
        alert('{{errors.msg}}')
    </script>
    {{/if}}



    <script src="/js/edit.js"></script>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/popper.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/main.js"></script>
</body>

</html>